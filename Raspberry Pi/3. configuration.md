# Configurations
## 1. Config of RPi
### 1.1 Enable I2C and SPI
`sudo raspi-config` to enable I2C and SPI

check if these are enabled by `$ lsmod`. If I2C enabled, the terminal echoes an `i2c-bcm2835` device, else you can add it manually: `sudo nano /etc/modules` and append:

```sh
i2c-bcm2835
i2c-dev
```

If SPI enabled, the terminal echoes an `spi-bcm2835` device.

### 1.2 [Enable Multiple SPI](https://www.raspberrypi.org/documentation/hardware/raspberrypi/spi/README.md)
SPI0 is disabled by default. To enable it, use `raspi-config`, or ensure the line `dtparam=spi=on` isn't commented out in `/boot/config.txt`. By default it uses 2 chip select lines, but this can be reduced to 1 using `dtoverlay=spi0-1cs`. `dtoverlay=spi0-2cs` also exists, and without any parameters it is equivalent to `dtparam=spi=on`.

To enable SPI1, you can use 1, 2 or 3 chip select lines, adding in each case:

```sh
dtoverlay=spi1-1cs  #1 chip select
dtoverlay=spi1-2cs  #2 chip select
dtoverlay=spi1-3cs  #3 chip select
```

to `/boot/config.txt` file. Similar overlays exist for SPI2, SPI3, SPI4, SPI5 and SPI6.

Reboot and check with `ls /dev/spidev`

## 2. Development
### 2.1 Mirrors (optional)
You can switch to TUNA mirrors if you need faster download. However, not all packages are supported in this mirror source.

```sh
$ sudo nano /etc/apt/sources.list
# add in the file:
deb http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main non-free contrib rpi
deb-src http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main non-free contrib rpi

$ sudo /etc/apt/sources.list.d/raspi.list
# add in the file:
deb http://mirrors.tuna.tsinghua.edu.cn/raspberrypi/ buster main ui
```

### 2.2 Python Environment
#### 2.2.1 Python Packages
Anaconda does not have ARM versions, so we stick to pre-installed Python enviroment on RPi. 

Here's a thing for whether to use `sudo apt-get install` or `pip3 install` to get Python packages. We recommend using `sudo apt-get install` as  `apt-get` enables update notifications, other apt-installed packages that need those tools know they're installed, etc. And most importantly. when you install through apt you're usually restricted to the version of the version(s) of the package your distro supports. Also, there's a more user-friendly version: `apt`

> `apt-get` may be considered as lower-level and "back-end", and support other APT-based tools. apt is designed for end-users (human) and its output may be changed between versions.
> The `apt` command is meant to be pleasant for end users and does not need to be backward compatible like apt-get(8).

#### 2.2.2 `apt-get` Package List
```sh
python3-pip
python3-numpy
python3-pil
RPi.GPIO
python3-gpiozero
jupyter-notebook
git
```

#### 2.2.3 `pip3` Package List
```sh
smbus
spidev
```

sudo apt-get install python3-imaging
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTQwMTQ5MzI4NCwtMTg2NjkzMTIxMywtMT
kzNDIzMzAxMywtNTM0NDY3ODAwLDc1OTkwMDQ0MCwxOTU5Mjk0
NzE3LDM3MDAxODg5LDIxMDY0MDAxMywtMTUyNTIwODQxNywxNj
E0NTA2NjI5LC0yMzYwNzM1NTAsLTE2MzAwNzAyMiwxODA5MzQw
ODI4LDE5ODIyMDQxMDEsMTU5ODM2MTI0MSwxNTk3MDE1NzI2LD
ExODc4OTkwMDIsOTE2NTE1NzUyLC0zNDk2MzkzMzAsODQ0NzIy
NzY1XX0=
-->